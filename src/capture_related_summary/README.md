# 抓包相关心得

此处介绍Charles抓包相关的一些经验和心得。

## Charles抓不到包可能是IP换了

心得：如果其他配置都对Charles还是没有任何数据包，则注意看看是不是（Charles所在的Mac电脑中的）IP地址变化导致的

详细过程：

之前在Mac中用Charles抓包，其中Mac是连接的有线网卡（无线网卡无法抓包）

后来的某一天，突然抓包不能用了，Charles中始终看不到请求了

在花了很多精力排除了其他因素后，突然发现此处的Mac的（有线网卡的）IP地址都已经变了：

`Mac -> Wifi -> 打开网络偏好设置`

中看到：

![](../assets/img/mac_wired_ip_changed.png)

从而导致安卓中设置的Charles的代理的IP失效，去手机端更新Charles代理的IP，即可继续抓包。

## Charles抓不到包，重启有时候就可以了

之前还遇到过，所有的配置都正确，Charles还是无法抓包，最后是重启Charles而解决了问题。

## 真机不行换模拟器试试

如果真机抓包抓不到，可以试试换成模拟器，对于有些特殊情况，就可以抓包了。

有些请求用安卓真机抓不到，换用安卓模拟器就可以了：

比如：

Mac中用Charles去抓包 一起学（以前叫 家长通） app

* 安卓真机：小米4
  * 部分请求抓不到：
    * 就是绘本馆的全部列表的请求和接口
    * 注意：不是抓取了无法解密，是根本看不到对应请求，无法抓包
* 安卓模拟器：Nox夜神安卓手机模拟器
  * 是可以抓到包的

## 如果Charles无法抓包https则可以试试Fiddler

[别人](https://www.zhihu.com/question/60618756)的经验：

> 尝试用Fiddler抓包，上次我用Charles半天不行，换成Fiddler然后再设置里勾上忽略安全竟然就可以抓了

有机会可以去试试。

## 手机端不用Charles时，记得把代理关闭了

当手机不抓包时（Charles关闭时），记得把Wifi的代理去掉，设置为 无，否则手机无法上网。
